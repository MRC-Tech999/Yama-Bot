"use server"

import nodemailer from "nodemailer"

interface ContactFormData {
  fullName: string
  email: string
  phoneNumber: string
  subject: string
  message: string
}

export async function submitContactForm(data: ContactFormData) {
  try {
    // Create transporter using Gmail SMTP
    const transporter = nodemailer.createTransporter({
      service: "gmail",
      auth: {
        user: "epay39209@gmail.com",
        pass: "eaol zidr syak zfjv",
      },
    })

    // Email to the receiver (Marc)
    const receiverEmailOptions = {
      from: "epay39209@gmail.com",
      to: "emprerorsukuna@gmail.com",
      subject: "New Contact Form Submission",
      html: `
        <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px; background-color: #f8f9fa;">
          <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 30px; border-radius: 10px 10px 0 0; text-align: center;">
            <h1 style="color: white; margin: 0; font-size: 28px;">New Contact Form Submission</h1>
            <p style="color: #e8e8e8; margin: 10px 0 0 0;">Contact Marc Website</p>
          </div>
          
          <div style="background: white; padding: 30px; border-radius: 0 0 10px 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
            <div style="margin-bottom: 25px;">
              <h3 style="color: #333; margin: 0 0 15px 0; font-size: 18px; border-bottom: 2px solid #667eea; padding-bottom: 5px;">Contact Information</h3>
              <table style="width: 100%; border-collapse: collapse;">
                <tr>
                  <td style="padding: 8px 0; font-weight: bold; color: #555; width: 120px;">Full Name:</td>
                  <td style="padding: 8px 0; color: #333;">${data.fullName}</td>
                </tr>
                <tr>
                  <td style="padding: 8px 0; font-weight: bold; color: #555;">Email:</td>
                  <td style="padding: 8px 0; color: #333;">${data.email}</td>
                </tr>
                <tr>
                  <td style="padding: 8px 0; font-weight: bold; color: #555;">Phone:</td>
                  <td style="padding: 8px 0; color: #333;">${data.phoneNumber}</td>
                </tr>
                <tr>
                  <td style="padding: 8px 0; font-weight: bold; color: #555;">Subject:</td>
                  <td style="padding: 8px 0; color: #333;">${data.subject}</td>
                </tr>
              </table>
            </div>
            
            <div>
              <h3 style="color: #333; margin: 0 0 15px 0; font-size: 18px; border-bottom: 2px solid #667eea; padding-bottom: 5px;">Message</h3>
              <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; border-left: 4px solid #667eea;">
                <p style="margin: 0; line-height: 1.6; color: #333;">${data.message}</p>
              </div>
            </div>
            
            <div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid #eee; text-align: center;">
              <p style="color: #666; font-size: 14px; margin: 0;">
                This message was sent from the Contact Marc website.<br>
                <strong>Developed by MarcTech</strong>
              </p>
            </div>
          </div>
        </div>
      `,
    }

    // Confirmation email to the user
    const userEmailOptions = {
      from: "epay39209@gmail.com",
      to: data.email,
      subject: "Thank you for contacting Marc - Message Received",
      html: `
        <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px; background-color: #f8f9fa;">
          <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 30px; border-radius: 10px 10px 0 0; text-align: center;">
            <h1 style="color: white; margin: 0; font-size: 28px;">Thank You, ${data.fullName}!</h1>
            <p style="color: #e8e8e8; margin: 10px 0 0 0;">Your message has been received</p>
          </div>
          
          <div style="background: white; padding: 30px; border-radius: 0 0 10px 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
            <p style="color: #333; font-size: 16px; line-height: 1.6; margin: 0 0 20px 0;">
              Thank you for reaching out! I've received your message and will get back to you within 24 hours.
            </p>
            
            <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; border-left: 4px solid #667eea; margin: 20px 0;">
              <h3 style="color: #333; margin: 0 0 15px 0; font-size: 16px;">Your Message Summary:</h3>
              <p style="margin: 5px 0; color: #555;"><strong>Subject:</strong> ${data.subject}</p>
              <p style="margin: 5px 0; color: #555;"><strong>Message:</strong> ${data.message}</p>
            </div>
            
            <p style="color: #333; font-size: 16px; line-height: 1.6; margin: 20px 0;">
              In the meantime, feel free to explore my services or connect with me on social media.
            </p>
            
            <div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid #eee; text-align: center;">
              <p style="color: #666; font-size: 14px; margin: 0;">
                Best regards,<br>
                <strong style="color: #667eea;">Marc</strong><br>
                <span style="font-size: 12px;">Developed by MarcTech</span>
              </p>
            </div>
          </div>
        </div>
      `,
    }

    // Send both emails
    await Promise.all([transporter.sendMail(receiverEmailOptions), transporter.sendMail(userEmailOptions)])

    return { success: true }
  } catch (error) {
    console.error("Error sending email:", error)
    return { success: false, error: "Failed to send email" }
  }
}
